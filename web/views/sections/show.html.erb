<div class="ui fluid card">
  <div class="content">
    <div class="header">
      <div class="ui ribbon label">section</div>
      <h2 class="ui header">
        <%= @section.name %>
      </h2>
      <div class="ui fluid horizontal menu">
        <a class="item" href="<%= occurrences_path(@project, section: @section) %>">Occurrences</a>
        <a class="item" href="<%= reports_path(@project, section: @section) %>">Report</a>
        <div class="ui right secondary menu">
          <div class="item">
            <button class="ui button edit-section-action">Edit</button>
          </div>
        </div>
      </div>
      <%= erb :'sections/_form.html', layout: false %>
    </div>
    <div class="ui description grid">
    </div>

    <h3>Samples</h3>
    <table class="ui striped celled table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
          <th>Weight</th>
        </tr>
      </thead>
      <tbody>
        <% @section.samples.sort_by(&:rank).each do |sample| %>
          <tr>
            <td>
              <%= sample.name %>
            </td>
            <td>
              <%= sample.description %>
            </td>
            <td>
              <%= sample.weight %>
            </td>
          </tr>
        <% end %>
      </tbody>
      <tfoot class="full-width">
        <tr>
          <th colspan="3">
            <button class="ui fluid icon button" href=""><i class="add icon"></i></button>
          </th>
        </tr>
      </tfoot>
    </table>
  </div>
</div>
<script type="text/javascript">
$(function() {
  const section = {
    id: <%= @section.id %>,
    name: "<%= @section.name %>",
  }
  $('.edit-section-action').click(() => {
    new SectionModalFormView(section, (section) => window.location.reload()).show()
  });
});
</script>
