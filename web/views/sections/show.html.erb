<div class="ui fluid card">
  <div class="content">
    <div class="header">
      <div class="ui ribbon label">section</div>
      <h2 class="ui header">
        <%= @section.name %>
      </h2>
      <div class="ui fluid horizontal menu">
        <a class="item" href="<%= occurrences_path(@project, section: @section) %>">Occurrences</a>
        <div class="ui right secondary menu">
          <div class="item">
            <button class="ui button edit-section-action">Edit</button>
          </div>
        </div>
      </div>
    </div>
    <div class="ui description grid">
    </div>
    <div class="ui modal" id="section-form-window">
      <div class="header">Edit Section</div>
      <div class="content">
        <%= erb :'_validation_messages.html', layout: false %>
        <form class="ui form" id="section-form">
          <div class="field">
            <input id="section-id" type="hidden" value="<%= @section.id %>" />
            <label for="section-name">Name</label>
            <input id="section-name" type="text" name="name" value="<%= @section.name %>" />
          </div>
        </form>
      </div>
      <div class="actions">
        <button class="ui cancel negative button">Cancel</button>
        <button class="ui approve positive button">Save</button>
      </div>
    </div>

    <h3>Samples</h3>
    <table class="ui striped celled table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
          <th>Weight</th>
        </tr>
      </thead>
      <tbody>
        <% @section.samples.sort_by(&:rank).each do |sample| %>
          <tr>
            <td>
              <%= sample.name %>
            </td>
            <td>
              <%= sample.description %>
            </td>
            <td>
              <%= sample.weight %>
            </td>
          </tr>
        <% end %>
      </tbody>
      <tfoot class="full-width">
        <tr>
          <th colspan="3">
            <button class="ui fluid icon button" href=""><i class="add icon"></i></button>
          </th>
        </tr>
      </tfoot>
    </table>
  </div>
</div>
<script type="text/javascript">
$(function() {
  $('.edit-section-action').click(() => {
    new EditModalFormView('section', new SectionRequest, (section) => window.location.reload()).show()
  });
});
</script>
