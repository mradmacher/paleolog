  <div class="panel">
    <div class="panel-heading">Researchers</div>
    <div class="panel-block">
      <ul>
      <% @project.researchers.each do |researcher| %>
        <li><%= researcher.user.name %>
      <% end %>
      </ul>
    </div>
    <div class="panel-block">
      <button class="button is-small is-black is-fullwidth add-researcher action" disabled><i class="add icon"></i>Add</button>
    </div>
  </div>

  <div class="panel project-countings">
    <div class="panel-heading">Countings</div>
    <div class="panel-block">
      <ul>
      <% @project.countings.each do |counting| %>
        <li><a href="<%= counting_path(@project, counting) %>"><%= counting.name %></a></li>
      <% end %>
      </ul>
    </div>
    <div class="panel-block">
      <button class="button is-small is-black is-fullwidth add-counting action"><i class="add icon"></i>Add</button>
    </div>
  </div>

  <div class="panel project-sections">
    <div class="panel-heading">Sections</div>
    <div class="panel-block">
      <ul>
      <% @project.sections.each do |section| %>
        <li><a href="<%= section_path(@project, section) %>"><%= section.name %></a></li>
      <% end %>
      </ul>
    </div>
    <div class="panel-block">
      <button class="button is-small is-black is-fullwidth add-section action"><i class="add icon"></i>Add</button>
    </div>
  </div>

<script type="module">
  import { ProjectModalFormView, CountingModalFormView, SectionModalFormView } from '/js/modal_form_views.js'

  $(function() {
    const section = {
      project_id: <%= @project.id %>,
      name: null,
    }

    const counting = {
      project_id: <%= @project.id %>,
      name: null,
    }

    $('.add-section.action').click(() => {
      new SectionModalFormView(section, (section) => window.location.reload()).show()
    })

    $('.add-counting.action').click(() => {
      new CountingModalFormView(counting, (counting) => window.location.reload()).show()
    })
  });
</script>
